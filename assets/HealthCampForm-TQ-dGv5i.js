import{r as i,j as e,e as be,f as Ne,g as ye,V as We,C as Qe,S as je,h as Xe,u as ae,i as ve,k as Ye,U as Ce,l as Ze,m as re,n as le,O as we,p as Se,T as Ae,D as ke,A as Te,q as De,P as Je,s as Ke,B as es,t as ss,v as as,w as ts}from"./common-vendor-Dm1O5F_f.js";import{d as R,u as te}from"./index-D5f3LA8Q.js";import{r as M,d as V,p as rs,s as X,f as ls,u as ie}from"./firebase-vendor-DMyrRdrZ.js";import{e as T,C as Y,a as Z,b as J,c as ns,d as K}from"./card-LNUWDAdH.js";import{I as B}from"./input-B4qfIMTe.js";import{A as ce,b as pe,a as me,B as xe,c as Oe}from"./alert-HtEo9hhP.js";import{T as ds,a as os,b as is,c as cs,d as ms,e as us,f as ps,g as xs}from"./tooltip-JWNWVOX-.js";import{T as Ee,a as H,b as z,c as hs,d as gs,e as fs}from"./table-BlATw8c5.js";import{S as bs,a as Ns,b as ys,c as js,d as vs}from"./select-1Mx02fKa.js";const Cs=Ne("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),L=i.forwardRef(({className:s,...t},l)=>e.jsx(be,{ref:l,className:T(Cs(),s),...t}));L.displayName=be.displayName;const ws=1,Ss=1e6;let ne=0;function As(){return ne=(ne+1)%Number.MAX_SAFE_INTEGER,ne.toString()}const de=new Map,he=s=>{if(de.has(s))return;const t=setTimeout(()=>{de.delete(s),ee({type:"REMOVE_TOAST",toastId:s})},Ss);de.set(s,t)},ks=(s,t)=>{switch(t.type){case"ADD_TOAST":return{...s,toasts:[t.toast,...s.toasts].slice(0,ws)};case"UPDATE_TOAST":return{...s,toasts:s.toasts.map(l=>l.id===t.toast.id?{...l,...t.toast}:l)};case"DISMISS_TOAST":{const{toastId:l}=t;return l?he(l):s.toasts.forEach(m=>{he(m.id)}),{...s,toasts:s.toasts.map(m=>m.id===l||l===void 0?{...m,open:!1}:m)}}case"REMOVE_TOAST":return t.toastId===void 0?{...s,toasts:[]}:{...s,toasts:s.toasts.filter(l=>l.id!==t.toastId)}}},Ts=[];let oe={toasts:[]};function ee(s){oe=ks(oe,s),Ts.forEach(t=>{t(oe)})}function ge({...s}){const t=As(),l=c=>ee({type:"UPDATE_TOAST",toast:{...c,id:t}}),m=()=>ee({type:"DISMISS_TOAST",toastId:t});return ee({type:"ADD_TOAST",toast:{...s,id:t,open:!0,onOpenChange:c=>{c||m()}}}),{id:t,dismiss:m,update:l}}const Ie=i.forwardRef(({className:s,children:t,...l},m)=>e.jsxs(ye,{ref:m,className:T("relative overflow-hidden",s),...l,children:[e.jsx(We,{className:"h-full w-full rounded-[inherit]",children:t}),e.jsx(Fe,{}),e.jsx(Qe,{})]}));Ie.displayName=ye.displayName;const Fe=i.forwardRef(({className:s,orientation:t="vertical",...l},m)=>e.jsx(je,{ref:m,orientation:t,className:T("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",s),...l,children:e.jsx(Xe,{className:"relative flex-1 rounded-full bg-border"})}));Fe.displayName=je.displayName;const _=({onSelect:s,value:t="",role:l="",label:m="Select staff",readOnly:c=!1,className:y="",error:h=!1})=>{const[S,r]=i.useState(""),[k,d]=i.useState([]),[w,O]=i.useState(!0),[E,a]=i.useState(!1),[v,I]=i.useState(!0);i.useEffect(()=>{r(t||"")},[t]),i.useEffect(()=>{(async()=>{try{const f=l?`staffData/${l}`:"staffFlattened",g=M(R,f),b=await V(g);if(b.exists()){const j=b.val(),C=Object.values(j||{});d(C)}else d([])}catch(f){console.error("Error fetching staff:",f),d([])}finally{O(!1)}})()},[l]);const N=n=>{const f=n.target.value;r(f),a(!0),I(!1),s(f)},p=n=>{r(n.displayName),I(!0),s(n.displayName),a(!1)},F=()=>{setTimeout(()=>{a(!1)},200)},o=S?k.filter(n=>n.displayName.toLowerCase().includes(S.toLowerCase())||n.empCode.toLowerCase().includes(S.toLowerCase())):[];return e.jsxs("div",{className:"relative",children:[e.jsx(B,{type:"text",placeholder:`${m} - Format: NAME (CODE)`,value:S,onChange:N,onBlur:F,className:T("w-full",c&&"bg-gray-100 cursor-not-allowed",h&&"border-red-500"),disabled:w||c}),E&&S&&!c&&e.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white rounded-md border shadow-lg",children:e.jsx(Ie,{className:"h-auto max-h-48",children:o.length===0?e.jsx("div",{className:"py-2 px-3 text-sm text-gray-500",children:"Enter in format: NAME (CODE) or select from list"}):e.jsx("div",{className:"py-1",children:o.map(n=>e.jsx("button",{className:T("w-full text-left px-3 py-1.5 text-sm hover:bg-gray-100",t===n.displayName&&"bg-gray-100"),onClick:()=>p(n),children:n.displayName},n.empCode))})})})]})},Ds=()=>{const s=ae(),{currentUser:t}=te(),[l,m]=i.useState(!1),[c,y]=i.useState(""),[h,S]=i.useState(!1),[r,k]=i.useState({}),[d,w]=i.useState({date:"",campCode:"",clinicCode:"",address:"",district:"",state:"",pinCode:"",mobileNo:"",nurseName:"",teamLeader:"",dcName:"",agentName:"",roName:"",somName:""});i.useEffect(()=>{if(d.date){const o=()=>{const n=d.date.replace(/-/g,""),f=Math.floor(Math.random()*1e4).toString().padStart(4,"0");return`MSHC${n}${f}`};w(n=>({...n,campCode:o()}))}},[d.date]);const O=()=>{w({date:"",campCode:"",clinicCode:"",address:"",district:"",state:"",pinCode:"",mobileNo:"",nurseName:"",teamLeader:"",dcName:"",agentName:"",roName:"",somName:""}),S(!1),y(""),k({})},E=(o,n)=>!(!o||!o.match(/^(.+)\s*\(([A-Z0-9]+)\)$/i)),a=async(o,n)=>{const f=o.match(/^(.+)\s*\(([A-Z0-9]+)\)$/i);if(!f)return!1;const[g,b,j]=f,C=n.replace(/s$/,"").toUpperCase(),x=`${b.trim()} (${j.toUpperCase()})`;try{const u={name:b.trim(),empCode:j.toUpperCase(),role:C,displayName:x},A=M(R,`staffData/${n}/${j}`);await X(A,u);const $=M(R,`staffFlattened/${j}`);return await X($,u),!0}catch(u){return console.error("Error adding staff member:",u),!1}},v=async o=>{if(o){m(!0);try{const n=o.toUpperCase(),f=M(R,`clinics/${n}`),g=await V(f);if(g.exists()){const C=g.val();I(C),S(!0);return}const b=M(R,"healthCamps"),j=await V(b);if(j.exists()){const x=Object.values(j.val()).find(u=>{var A;return((A=u.clinicCode)==null?void 0:A.toUpperCase())===n});if(x){I(x),S(!0);const u=M(R,`clinics/${n}`);await X(u,{clinicCode:n,address:x.address.toUpperCase(),district:x.district.toUpperCase(),state:x.state.toUpperCase(),pinCode:x.pinCode.toUpperCase(),mobileNo:x.mobileNo.toUpperCase(),nurseName:x.nurseName,teamLeader:x.teamLeader,dcName:x.dcName,agentName:x.agentName,roName:x.roName,somName:x.somName,lastUpdated:new Date().toISOString()});return}}S(!1),w(C=>({...C,address:"",district:"",state:"",pinCode:"",mobileNo:"",nurseName:"",teamLeader:"",dcName:"",agentName:"",roName:"",somName:""}))}catch(n){console.error("Error fetching clinic data:",n),ge({variant:"destructive",title:"Error",description:"Failed to fetch clinic data: "+n.message})}finally{m(!1)}}},I=o=>{w(n=>({...n,address:(o.address||"").toUpperCase(),district:(o.district||"").toUpperCase(),state:(o.state||"").toUpperCase(),pinCode:(o.pinCode||"").toUpperCase(),mobileNo:(o.mobileNo||"").toUpperCase(),nurseName:o.nurseName||"",teamLeader:o.teamLeader||"",dcName:o.dcName||"",agentName:o.agentName||"",roName:o.roName||"",somName:o.somName||""}))},N=o=>{const{name:n,value:f}=o.target,g=f.toUpperCase();n==="clinicCode"&&f.length>=3&&v(g),w(b=>({...b,[n]:g}))},p=()=>{const o={};["date","clinicCode","address","district","state","pinCode","mobileNo"].forEach(g=>{d[g]||(o[g]="This field is required")}),d.pinCode&&!/^\d{6}$/.test(d.pinCode)&&(o.pinCode="Pin code must be 6 digits"),d.mobileNo&&!/^\d{10}$/.test(d.mobileNo)&&(o.mobileNo="Mobile number must be 10 digits");const f={nurseName:"nurses",teamLeader:"teamLeaders",dcName:"districtCoordinators",agentName:"agents",roName:"regionalOfficers",somName:"salesOfficerManagers"};for(const[g,b]of Object.entries(f))d[g]?E(d[g])||(o[g]="Invalid staff format. Use: NAME (CODE)"):o[g]="Staff member is required";return k(o),Object.keys(o).length===0},F=async o=>{o.preventDefault(),m(!0),y("");try{if(!p()){m(!1);return}if(!h){const b={nurseName:"nurses",teamLeader:"teamLeaders",dcName:"districtCoordinators",agentName:"agents",roName:"regionalOfficers",somName:"salesOfficerManagers"};for(const[j,C]of Object.entries(b))if(d[j]&&!await a(d[j],C)){y(`Failed to add ${j} to staff database`),m(!1);return}}const n={...d,status:"scheduled",createdBy:t.email,createdAt:new Date().toISOString(),lastModified:new Date().toISOString()},f=M(R,"healthCamps");await rs(f,n);const g=M(R,`clinics/${d.clinicCode}`);await X(g,{clinicCode:d.clinicCode,address:d.address,district:d.district,state:d.state,pinCode:d.pinCode,mobileNo:d.mobileNo,nurseName:d.nurseName,teamLeader:d.teamLeader,dcName:d.dcName,agentName:d.agentName,roName:d.roName,somName:d.somName,lastUpdated:new Date().toISOString()}),ge({title:"Success",description:"Camp scheduled successfully!"}),alert("Camp scheduled Successfully"),O()}catch(n){console.error("Error scheduling camp:",n),y("Failed to schedule camp: "+n.message)}finally{m(!1)}};return e.jsx("div",{className:"container mx-auto",children:e.jsxs(Y,{className:"w-full max-w-8xl mx-auto",children:[e.jsxs(Z,{children:[e.jsx(J,{className:"text-2xl font-bold text-gray-800",children:"Schedule New Health Camp"}),e.jsx(ns,{children:"Fill in the details for a new health camp scheduling"})]}),e.jsx(K,{children:e.jsxs("form",{onSubmit:F,className:"space-y-6",children:[c&&e.jsxs(ce,{variant:"destructive",children:[e.jsx(pe,{children:"Error"}),e.jsx(me,{children:c})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center",children:[e.jsx(ve,{className:"mr-2 text-primary"}),"Camp Details"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{children:"Date"}),e.jsx(B,{type:"date",name:"date",value:d.date,onChange:N,required:!0,className:r.date?"border-red-500":""}),r.date&&e.jsx("span",{className:"text-xs text-red-500",children:r.date})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{children:"Camp Code"}),e.jsx(B,{type:"text",value:d.campCode,readOnly:!0,className:"bg-gray-100 cursor-not-allowed"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(L,{className:"flex items-center",children:["Clinic Code",h&&e.jsx("span",{className:"ml-2 text-green-600 text-xs",children:"✓ Clinic Found"})]}),e.jsx(B,{type:"text",name:"clinicCode",value:d.clinicCode,onChange:N,required:!0,className:r.clinicCode?"border-red-500":""}),r.clinicCode&&e.jsx("span",{className:"text-xs text-red-500",children:r.clinicCode})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center",children:[e.jsx(Ye,{className:"mr-2 text-primary"}),"Location Details"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{children:"Address"}),e.jsx(B,{type:"text",name:"address",value:d.address,onChange:N,required:!0,readOnly:h,className:T(r.address?"border-red-500":"",h&&"bg-gray-100")}),r.address&&e.jsx("span",{className:"text-xs text-red-500",children:r.address})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{children:"District"}),e.jsx(B,{type:"text",name:"district",value:d.district,onChange:N,required:!0,readOnly:h,className:T(r.district?"border-red-500":"",h&&"bg-gray-100")}),r.district&&e.jsx("span",{className:"text-xs text-red-500",children:r.district})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{children:"State"}),e.jsx(B,{type:"text",name:"state",value:d.state,onChange:N,required:!0,readOnly:h,className:T(r.state?"border-red-500":"",h&&"bg-gray-100")}),r.state&&e.jsx("span",{className:"text-xs text-red-500",children:r.state})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{children:"Pin Code"}),e.jsx(B,{type:"text",name:"pinCode",value:d.pinCode,onChange:N,required:!0,pattern:"[0-9]{6}",readOnly:h,className:T(r.pinCode?"border-red-500":"",h&&"bg-gray-100")}),r.pinCode&&e.jsx("span",{className:"text-xs text-red-500",children:r.pinCode})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{children:"Mobile Number"}),e.jsx(B,{type:"tel",name:"mobileNo",value:d.mobileNo,onChange:N,required:!0,pattern:"[0-9]{10}",readOnly:h,className:T(r.mobileNo?"border-red-500":"",h&&"bg-gray-100")}),r.mobileNo&&e.jsx("span",{className:"text-xs text-red-500",children:r.mobileNo})]})]})]})]}),e.jsxs("div",{className:"space-y-4 pt-6",children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center",children:[e.jsx(Ce,{className:"mr-2 text-primary"}),"Staff Details"]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{children:"Nurse Name"}),e.jsx(_,{value:d.nurseName,onSelect:o=>w(n=>({...n,nurseName:o})),role:"nurses",label:"Select Nurse",readOnly:h,error:!!r.nurseName}),r.nurseName&&e.jsx("span",{className:"text-xs text-red-500",children:r.nurseName})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{children:"Team Leader"}),e.jsx(_,{value:d.teamLeader,onSelect:o=>w(n=>({...n,teamLeader:o})),role:"teamLeaders",label:"Select Team Leader",readOnly:h,error:!!r.teamLeader}),r.teamLeader&&e.jsx("span",{className:"text-xs text-red-500",children:r.teamLeader})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{children:"DC Name"}),e.jsx(_,{value:d.dcName,onSelect:o=>w(n=>({...n,dcName:o})),role:"districtCoordinators",label:"Select DC",readOnly:h,error:!!r.dcName}),r.dcName&&e.jsx("span",{className:"text-xs text-red-500",children:r.dcName})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{children:"Agent Name"}),e.jsx(_,{value:d.agentName,onSelect:o=>w(n=>({...n,agentName:o})),role:"agents",label:"Select Agent",readOnly:h,error:!!r.agentName}),r.agentName&&e.jsx("span",{className:"text-xs text-red-500",children:r.agentName})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{children:"RO Name"}),e.jsx(_,{value:d.roName,onSelect:o=>w(n=>({...n,roName:o})),role:"regionalOfficers",label:"Select RO",readOnly:h,error:!!r.roName}),r.roName&&e.jsx("span",{className:"text-xs text-red-500",children:r.roName})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{children:"SOM Name"}),e.jsx(_,{value:d.somName,onSelect:o=>w(n=>({...n,somName:o})),role:"salesOfficerManagers",label:"Select SOM",readOnly:h,error:!!r.somName}),r.somName&&e.jsx("span",{className:"text-xs text-red-500",children:r.somName})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-6",children:[e.jsx(xe,{type:"button",variant:"outline",onClick:()=>{O(),s("/health-camp")},disabled:l,children:"Cancel"}),e.jsx(xe,{type:"submit",disabled:l,className:"flex items-center",children:l?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin mr-2 h-4 w-4",children:"●"}),"Scheduling..."]}):"Schedule Camp"})]}),h&&e.jsxs(ce,{className:"mt-4",children:[e.jsx(pe,{children:"Existing Clinic Found"}),e.jsx(me,{children:"All details have been auto-filled and locked based on previous clinic data."})]})]})})]})})},Re=({onCampFound:s,onError:t,onLoading:l,value:m,onChange:c,disabled:y=!1,checkCompletion:h=!1})=>{const[S,r]=i.useState(m||""),[k,d]=i.useState([]),[w,O]=i.useState(!1);i.useEffect(()=>{r(m||"")},[m]);const E=async N=>{if(!(!N||N.length<7)){l==null||l(!0);try{const p=M(R,"healthCamps"),F=await V(p);if(F.exists()){const o=Object.entries(F.val()),[n,f]=o.find(([g,b])=>b.campCode===N)||[];if(f){if(h&&f.status==="completed"){t==null||t("This camp has already been completed");return}s==null||s(n,f)}else t==null||t("Camp not found")}}catch(p){console.error("Error fetching camp data:",p),t==null||t("Error fetching camp data: "+p.message)}finally{l==null||l(!1)}}},a=async N=>{if(!N||N.length<3){d([]);return}try{const p=M(R,"healthCamps"),F=await V(p);if(F.exists()){const n=Object.values(F.val()).filter(f=>{var b;const g=(b=f.campCode)==null?void 0:b.toLowerCase().includes(N.toLowerCase());return h?g&&f.status!=="completed":g}).slice(0,5).map(f=>f.campCode);d(n)}}catch(p){console.error("Error fetching suggestions:",p)}},v=N=>{const p=N.target.value;r(p),c==null||c(p),O(!0),a(p),p.length>=7&&E(p)},I=N=>{r(N),c==null||c(N),O(!1),E(N)};return e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Ze,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"text",value:S,onChange:v,disabled:y,placeholder:"Enter camp code (e.g., MSHC)",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm disabled:bg-gray-100"})]}),w&&k.length>0&&e.jsx("div",{className:"absolute z-10 mt-1 w-full bg-white shadow-lg max-h-60 rounded-md py-1 text-base ring-1 ring-black ring-opacity-5 overflow-auto focus:outline-none sm:text-sm",children:k.map(N=>e.jsx("div",{onClick:()=>I(N),className:"cursor-pointer select-none relative py-2 pl-3 pr-9 hover:bg-indigo-50",children:e.jsx("span",{className:"block truncate",children:N})},N))})]})},Os=Ne("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Es({className:s,variant:t,...l}){return e.jsx("div",{className:T(Os({variant:t}),s),...l})}const ue=s=>{if(!s)return"-";try{const t=new Date(s);return isNaN(t.getTime())?"-":new Intl.DateTimeFormat("en-IN",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}).format(t)}catch(t){return console.error("Date formatting error:",t),"-"}},fe=s=>!s||typeof s!="string"?"-":s.split("@")[0],Is=s=>({sent:"bg-green-100 text-green-800",pending:"bg-yellow-100 text-yellow-800"})[s]||"bg-gray-100 text-gray-800",se=i.memo(({label:s,timestamp:t,user:l})=>!t||!l?null:e.jsx(ds,{delayDuration:300,children:e.jsxs(os,{children:[e.jsx(is,{asChild:!0,children:e.jsxs("div",{className:"flex flex-col text-xs cursor-pointer",role:"button",tabIndex:0,"aria-label":`${s} information for ${fe(l)}`,children:[e.jsx("span",{className:"font-medium",children:fe(l)}),e.jsx("span",{className:"text-gray-500",children:ue(t)})]})}),e.jsx(cs,{side:"top",children:e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium",children:s}),e.jsxs("p",{children:["User: ",l]}),e.jsxs("p",{children:["Time: ",ue(t)]})]})})]})}));se.displayName="UserActivityInfo";const Me=i.memo(({status:s})=>e.jsx(Es,{variant:"outline",className:T("px-2 py-1 text-xs font-semibold rounded-full",Is(s)),children:s==="sent"?"Completed":"Pending"}));Me.displayName="StatusBadge";const Le=i.memo(({type:s})=>e.jsxs(Ee,{children:[e.jsx(H,{className:"whitespace-nowrap sticky top-0 bg-white z-10",children:"Camp Code"}),e.jsx(H,{className:"whitespace-nowrap sticky top-0 bg-white z-10",children:"Camp Date"}),e.jsx(H,{className:"whitespace-nowrap sticky top-0 bg-white z-10",children:"Location"}),e.jsx(H,{className:"whitespace-nowrap sticky top-0 bg-white z-10",children:"Created"}),(s==="pendingClosure"||s==="closed")&&e.jsx(H,{className:"whitespace-nowrap sticky top-0 bg-white z-10",children:"Completed"}),s==="closed"&&e.jsxs(e.Fragment,{children:[e.jsx(H,{className:"whitespace-nowrap sticky top-0 bg-white z-10",children:"Report Status"}),e.jsx(H,{className:"whitespace-nowrap sticky top-0 bg-white z-10",children:"Report Updated"})]})]}));Le.displayName="TableHeaderRow";const Ue=i.memo(({camp:s,type:t,onCampCodeClick:l})=>e.jsxs(Ee,{className:"hover:bg-gray-50",children:[e.jsx(z,{children:e.jsx("button",{onClick:()=>l==null?void 0:l(s.campCode),className:"text-blue-600 hover:underline focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 rounded px-2 py-1 font-medium","aria-label":`View details for camp ${s.campCode}`,children:s.campCode})}),e.jsx(z,{children:e.jsx("span",{className:"text-sm",children:ue(s.date)})}),e.jsx(z,{children:e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{children:s.district||"-"}),e.jsx("div",{className:"text-gray-500",children:s.state||"-"})]})}),e.jsx(z,{children:e.jsx(se,{label:"Created",timestamp:s.createdAt,user:s.createdBy})}),(t==="pendingClosure"||t==="closed")&&e.jsx(z,{children:e.jsx(se,{label:"Completed",timestamp:s.completedAt,user:s.completedBy})}),t==="closed"&&e.jsxs(e.Fragment,{children:[e.jsx(z,{children:e.jsx(Me,{status:s.reportStatus})}),e.jsx(z,{children:e.jsx(se,{label:"Report Updated",timestamp:s.reportStatusUpdatedAt,user:s.reportStatusUpdatedBy})})]})]}));Ue.displayName="CampRow";const Fs=({camps:s=[],type:t,onCampCodeClick:l})=>{const[m,c]=i.useState(!1);if(!Array.isArray(s))return console.error("Camps prop must be an array"),null;const y=m?s:s.slice(0,5);return e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("div",{className:"relative overflow-hidden shadow-md sm:rounded-lg",role:"region","aria-label":"Health camps table",children:e.jsx("div",{className:"overflow-y-auto max-h-96",children:e.jsxs(hs,{children:[e.jsx(gs,{children:e.jsx(Le,{type:t})}),e.jsx(fs,{children:y.map(h=>e.jsx(Ue,{camp:h,type:t,onCampCodeClick:l},h.id||h.campCode))})]})})}),s.length>5&&e.jsx("button",{onClick:()=>c(!m),className:"self-center px-4 py-2 text-sm font-medium text-blue-600 hover:text-blue-800 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded",children:m?"Show Less":`Show All (${s.length})`})]})},Rs=i.memo(Fs),Pe=({activeContext:s,onCampCodeClick:t})=>{const[l,m]=i.useState([]),[c,y]=i.useState(!0),[h,S]=i.useState(null),[r,k]=i.useState(!0);i.useEffect(()=>{const p=M(R,"healthCamps"),o=ls(p,n=>{try{if(n.exists()){const f=Object.entries(n.val()).map(([g,b])=>({id:g,...b})).filter(g=>g.status!=="cancelled").sort((g,b)=>new Date(b.date)-new Date(g.date));m(f)}else m([]);y(!1)}catch(f){S("Failed to fetch camps: "+f.message),y(!1)}});return()=>o()},[]);const d=l.filter(p=>p.status!=="completed"),w=l.filter(p=>p.status==="completed"&&!p.reportStatus),O=l.filter(p=>p.status==="completed"&&p.reportStatus==="sent"),E=()=>{switch(s){case"schedule":return["incomplete"];case"complete":return["incomplete","pendingClosure"];case"close":return["pendingClosure","closed"];default:return["incomplete","pendingClosure","closed"]}},a=()=>{switch(s){case"schedule":return"incomplete";case"complete":return"incomplete";case"close":return"pendingClosure";default:return"incomplete"}},v={incomplete:{label:"Scheduled Camps",count:d.length,data:d},pendingClosure:{label:"Report Pending",count:w.length,data:w},closed:{label:"Closed",count:O.length,data:O}};if(c)return e.jsxs(Y,{className:"w-full",children:[e.jsxs(Z,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(J,{children:"Health Camps Overview"}),e.jsx("button",{onClick:()=>k(!r),className:"p-1 hover:bg-gray-100 rounded transition-colors","aria-label":r?"Collapse panel":"Expand panel",children:r?e.jsx(re,{className:"h-5 w-5"}):e.jsx(le,{className:"h-5 w-5"})})]}),e.jsx(K,{children:e.jsx("div",{className:"flex justify-center items-center h-48",role:"status",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500",children:e.jsx("span",{className:"sr-only",children:"Loading..."})})})})]});if(h)return e.jsxs(Y,{className:"w-full",children:[e.jsxs(Z,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(J,{children:"Health Camps Overview"}),e.jsx("button",{onClick:()=>k(!r),className:"p-1 hover:bg-gray-100 rounded transition-colors","aria-label":r?"Collapse panel":"Expand panel",children:r?e.jsx(re,{className:"h-5 w-5"}):e.jsx(le,{className:"h-5 w-5"})})]}),e.jsx(K,{children:e.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4",role:"alert",children:e.jsx("div",{className:"flex",children:e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm text-red-700",children:h})})})})})]});const I=E(),N=`grid-cols-${I.length}`;return e.jsxs(Y,{className:"w-full",children:[e.jsxs(Z,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(J,{children:"Health Camps Overview"}),e.jsx("button",{onClick:()=>k(!r),className:"p-1 hover:bg-gray-100 rounded transition-colors","aria-label":r?"Collapse panel":"Expand panel",children:r?e.jsx(re,{className:"h-5 w-5"}):e.jsx(le,{className:"h-5 w-5"})})]}),e.jsx(K,{children:r&&e.jsxs(ms,{defaultValue:a(),className:"w-full",children:[e.jsx(us,{className:`mb-4 grid w-full ${N}`,children:I.map(p=>e.jsxs(ps,{value:p,children:[v[p].label," (",v[p].count,")"]},p))}),I.map(p=>e.jsx(xs,{value:p,children:v[p].data.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:["No ",v[p].label.toLowerCase()," found"]}):e.jsx(Rs,{camps:v[p].data,type:p,onCampCodeClick:t})},p))]})})]})},Ms=[{label:"Red cliff",value:"RED_CLIFF"},{label:"Healthians",value:"HEALTHIANS"},{label:"Tata1mg",value:"TATA1MG"},{label:"Goraksh Diagnostic",value:"GORAKSH_DIAGNOSTIC"}],Ls=({formData:s,handleChange:t,isCompleted:l})=>{const m=c=>{t({target:{name:"vendorName",value:c}})};return e.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Vendor Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Vendor"}),e.jsxs(bs,{value:s.vendorName,onValueChange:m,disabled:l,children:[e.jsx(Ns,{className:"w-full",children:e.jsx(ys,{placeholder:"Select vendor"})}),e.jsx(js,{children:Ms.map(c=>e.jsx(vs,{value:c.value,children:c.label},c.value))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Phlebotomist Name"}),e.jsx("input",{type:"text",name:"phleboName",value:s.phleboName,onChange:t,required:!0,readOnly:l,className:`mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 ${l?"bg-gray-100":"focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Phlebotomist Mobile Number"}),e.jsx("input",{type:"tel",name:"phleboMobileNo",value:s.phleboMobileNo,onChange:t,required:!0,pattern:"[0-9]{10}",readOnly:l,className:`mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 ${l?"bg-gray-100":"focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"}`})]})]})]})},Us=Ke,Ps=Je,$e=i.forwardRef(({className:s,...t},l)=>e.jsx(we,{className:T("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...t,ref:l}));$e.displayName=we.displayName;const Be=i.forwardRef(({className:s,...t},l)=>e.jsxs(Ps,{children:[e.jsx($e,{}),e.jsx(Se,{ref:l,className:T("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...t})]}));Be.displayName=Se.displayName;const He=({className:s,...t})=>e.jsx("div",{className:T("flex flex-col space-y-2 text-center sm:text-left",s),...t});He.displayName="AlertDialogHeader";const ze=({className:s,...t})=>e.jsx("div",{className:T("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t});ze.displayName="AlertDialogFooter";const Ve=i.forwardRef(({className:s,...t},l)=>e.jsx(Ae,{ref:l,className:T("text-lg font-semibold",s),...t}));Ve.displayName=Ae.displayName;const qe=i.forwardRef(({className:s,...t},l)=>e.jsx(ke,{ref:l,className:T("text-sm text-muted-foreground",s),...t}));qe.displayName=ke.displayName;const _e=i.forwardRef(({className:s,...t},l)=>e.jsx(Te,{ref:l,className:T(Oe(),s),...t}));_e.displayName=Te.displayName;const Ge=i.forwardRef(({className:s,...t},l)=>e.jsx(De,{ref:l,className:T(Oe({variant:"outline"}),"mt-2 sm:mt-0",s),...t}));Ge.displayName=De.displayName;const $s=300,G={campCode:"",date:"",clinicCode:"",address:"",district:"",state:"",pinCode:"",nurseName:"",mobileNo:"",tl:"",tlEmpId:"",dcName:"",dcEmpId:"",unitsSold:"",revenue:"",amountPaidToFinance:"",marketingExpense:"",operationalExpense:"",transactionId:"",partnerType:"",partnerName:"",partnerAdjustedCount:"",partnerAdjustmentAmount:"",vendorName:"",phleboName:"",phleboMobileNo:""},Bs=()=>{const s=ae(),{currentUser:t}=te(),[l,m]=i.useState(!1),[c,y]=i.useState(""),[h,S]=i.useState(!1),[r,k]=i.useState(!1),[d,w]=i.useState(!1),[O,E]=i.useState(null),[a,v]=i.useState(G),[I,N]=i.useState(!1),[p,F]=i.useState(!1),o=()=>{C(),s("/health-camp")},n=async x=>{if(x){m(!0),y("");try{const u=M(R,"healthCamps"),A=await V(u);if(A.exists()){const $=Object.entries(A.val()),[U,D]=$.find(([P,W])=>{var q;return((q=W.campCode)==null?void 0:q.toUpperCase())===x.toUpperCase()})||[];if(D){E(U),S(!0),k(D.status==="completed"),N(D.status==="cancelled");const P=Object.entries(D).reduce((W,[q,Q])=>(typeof Q=="string"&&!["completedAt","createdAt","lastModified","cancelledAt"].includes(q)&&!Q.includes("@")?W[q]=Q.toUpperCase():W[q]=Q,W),{});D.status==="completed"||D.status==="cancelled"?(v({...G,...P}),w(!!D.partnerName)):v({...G,...P,unitsSold:"",revenue:"",amountPaidToFinance:"",marketingExpense:"",operationalExpense:"",transactionId:"",partnerName:"",partnerAdjustedCount:"",partnerAdjustmentAmount:"",phleboName:"",phleboMobileNo:""})}else y("Camp not found"),S(!1),k(!1),N(!1),v(G)}}catch(u){console.error("Error fetching camp data:",u),y("Error fetching camp data: "+u.message),v(G)}finally{m(!1)}}},f=async()=>{m(!0),y("");try{const x={status:"cancelled",cancelledBy:t.email,cancelledAt:new Date().toISOString()},u=M(R,`healthCamps/${O}`);await ie(u,x),alert("Camp cancelled successfully!"),C(),s("/health-camp")}catch(x){y("Failed to cancel camp: "+x.message)}finally{m(!1),F(!1)}},g=x=>{const{name:u,value:A}=x.target;if(r)return;let $=A,U={};if(["unitsSold","revenue","amountPaidToFinance","marketingExpense","operationalExpense","partnerAdjustedCount","partnerAdjustmentAmount","partnerType"].includes(u)||($=A.toUpperCase()),U[u]=$,u==="unitsSold"){const D=parseInt(A)||0,P=a.partnerType==="HUMANA"?500:$s;U.revenue=(D*P).toString()}if(u==="partnerAdjustedCount"||u==="partnerType"){const D=u==="partnerType"?parseInt(a.partnerAdjustedCount)||0:parseInt(A)||0,P=u==="partnerType"?A:a.partnerType;P==="PAHAL"?U.partnerAdjustmentAmount=(D*150).toString():P==="HUMANA"&&(U.partnerAdjustmentAmount=(D*500).toString(),u==="partnerType"&&a.unitsSold&&(U.revenue=(parseInt(a.unitsSold)*500).toString()))}v(D=>({...D,...U}))},b=()=>{const{revenue:x,amountPaidToFinance:u,marketingExpense:A,operationalExpense:$,partnerAdjustmentAmount:U}=a,D=parseInt(u||0)+parseInt(A||0)+parseInt($||0);return d&&U?D+parseInt(U||0)===parseInt(x||0):D===parseInt(x||0)},j=async x=>{if(x.preventDefault(),!b()){y("Total expenses must equal revenue");return}m(!0),y("");try{const u={status:"completed",unitsSold:a.unitsSold,revenue:a.revenue,amountPaidToFinance:a.amountPaidToFinance,marketingExpense:a.marketingExpense,operationalExpense:a.operationalExpense,transactionId:a.transactionId,vendorName:a.vendorName,phleboName:a.phleboName,phleboMobileNo:a.phleboMobileNo,completedBy:t.email,completedAt:new Date().toISOString()};d&&(u.partnerName=a.partnerName,u.partnerAdjustedCount=a.partnerAdjustedCount,u.partnerAdjustmentAmount=a.partnerAdjustmentAmount);const A=M(R,`healthCamps/${O}`);await ie(A,u),alert("Camp completed successfully!"),C(),s("/health-camp")}catch(u){y("Failed to complete camp: "+u.message)}finally{m(!1)}},C=()=>{v(G),S(!1),y(""),w(!1),E(null)};return e.jsxs("form",{onSubmit:j,className:"space-y-8",children:[c&&e.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm-1-9v4a1 1 0 102 0V9a1 1 0 10-2 0z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm text-red-700",children:c})})]})}),e.jsx(Pe,{activeContext:"complete",onCampCodeClick:x=>{v(u=>({...u,campCode:x})),n(x)}}),e.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Search Camp"}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Camp Code",h&&e.jsx("span",{className:`ml-2 text-xs ${r?"text-orange-600":"text-green-600"}`,children:r?"✓ Camp Already Completed":"✓ Camp Found"})]}),e.jsx(Re,{value:a.campCode,onChange:x=>v(u=>({...u,campCode:x})),onCampFound:(x,u)=>{E(x),S(!0),k(u.status==="completed"),u.status==="completed"?(v(A=>({...A,...u})),w(!!u.partnerName)):v(A=>({...A,...u,unitsSold:"",revenue:"",amountPaidToFinance:"",marketingExpense:"",operationalExpense:"",transactionId:"",partnerName:"",partnerAdjustedCount:"",partnerAdjustmentAmount:"",phleboName:"",phleboMobileNo:""})),y("")},onError:y,onLoading:m,checkCompletion:!1})]})]}),h&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Camp Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Date"}),e.jsx("input",{type:"text",value:a.date,readOnly:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 bg-gray-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Clinic Code"}),e.jsx("input",{type:"text",value:a.clinicCode,readOnly:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 bg-gray-100"})]}),e.jsxs("div",{className:"md:col-span-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Address"}),e.jsx("input",{type:"text",value:a.address,readOnly:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 bg-gray-100 uppercase"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"District"}),e.jsx("input",{type:"text",value:a.district,readOnly:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 bg-gray-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"State"}),e.jsx("input",{type:"text",value:a.state,readOnly:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 bg-gray-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Pin Code"}),e.jsx("input",{type:"text",value:a.pinCode,readOnly:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 bg-gray-100"})]})]})]}),e.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Partner Adjustment"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("label",{className:"mr-2 text-md font-medium text-black",children:"Enable"}),e.jsx("input",{type:"checkbox",checked:d,onChange:x=>!r&&w(x.target.checked),disabled:r,className:"rounded border-gray-300 text-indigo-600 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"})]})]}),d&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Partner Type"}),e.jsxs("select",{name:"partnerType",value:a.partnerType,onChange:g,required:d,disabled:r,className:`mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 ${r?"bg-gray-100":"focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"}`,children:[e.jsx("option",{value:"",children:"Select Partner"}),e.jsx("option",{value:"PAHAL",children:"PAHAL"}),e.jsx("option",{value:"HUMANA",children:"HUMANA"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Partner Adjusted Count"}),e.jsx("input",{type:"number",name:"partnerAdjustedCount",value:a.partnerAdjustedCount,onChange:g,required:d,min:"0",readOnly:r,className:`mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 ${r?"bg-gray-100":"focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Partner Adjustment Amount"}),e.jsx("input",{type:"number",name:"partnerAdjustmentAmount",value:a.partnerAdjustmentAmount,readOnly:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 bg-gray-100"})]})]})]}),e.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Financial Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Tests Done"}),e.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",name:"unitsSold",value:a.unitsSold,onChange:g,required:!0,readOnly:r,className:`mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none ${r?"bg-gray-100":"focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Revenue"}),e.jsx("input",{type:"text",inputMode:"numeric",name:"revenue",value:a.revenue,readOnly:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 bg-gray-100 [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Transaction ID"}),e.jsx("input",{type:"text",name:"transactionId",value:a.transactionId,onChange:g,required:!0,readOnly:r,className:`mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 ${r?"bg-gray-100":"focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Amount Paid to Finance"}),e.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",name:"amountPaidToFinance",value:a.amountPaidToFinance,onChange:g,required:!0,readOnly:r,className:`mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none ${r?"bg-gray-100":"focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Marketing Expense"}),e.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",name:"marketingExpense",value:a.marketingExpense,onChange:g,required:!0,readOnly:r,className:`mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none ${r?"bg-gray-100":"focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Operational Expense"}),e.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",name:"operationalExpense",value:a.operationalExpense,onChange:g,required:!0,readOnly:r,className:`mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none ${r?"bg-gray-100":"focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"}`})]})]})]}),e.jsx(Ls,{formData:a,handleChange:g,isCompleted:r}),e.jsxs("div",{className:"bg-blue-50 p-6 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-medium text-blue-900 mb-4",children:"Financial Summary"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-blue-700",children:"Total Revenue:"}),e.jsxs("span",{className:"ml-2 font-medium",children:["₹",a.revenue]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-blue-700",children:"Amount Matched:"}),e.jsxs("span",{className:"ml-2 font-medium",children:["₹",(parseInt(a.amountPaidToFinance||0)+parseInt(a.marketingExpense||0)+parseInt(a.operationalExpense||0)+(d?parseInt(a.partnerAdjustmentAmount||0):0)).toLocaleString()]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4 mt-8",children:[!r&&!I&&e.jsxs(e.Fragment,{children:[h&&e.jsx("button",{type:"button",onClick:()=>F(!0),disabled:l,className:"bg-red-600 text-white px-6 py-2 rounded-md text-sm font-medium hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:l?e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"})}),"Processing..."]}):"Cancel Camp"}),e.jsx("button",{type:"button",onClick:()=>{v({campCode:"",date:"",clinicCode:"",address:"",district:"",state:"",pinCode:"",nurseName:"",mobileNo:"",tl:"",tlEmpId:"",dcName:"",dcEmpId:"",unitsSold:"",revenue:"",amountPaidToFinance:"",marketingExpense:"",operationalExpense:"",transactionId:"",partnerName:"",partnerAdjustedCount:"",partnerAdjustmentAmount:"",phleboName:"",phleboMobileNo:""}),S(!1),y(""),w(!1)},disabled:l,className:"bg-gray-200 text-gray-700 px-6 py-2 rounded-md text-sm font-medium hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 disabled:opacity-50 disabled:cursor-not-allowed",children:"Clear Form"}),e.jsx("button",{type:"submit",disabled:l||!h,className:"bg-indigo-600 text-white px-6 py-2 rounded-md text-sm font-medium hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 flex items-center disabled:opacity-50 disabled:cursor-not-allowed",children:l?e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"})}),"Processing..."]}):"Complete Camp"})]}),e.jsx("button",{type:"button",onClick:o,className:"bg-gray-200 text-gray-700 px-6 py-2 rounded-md text-sm font-medium hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:r||I?"Back":"Cancel"})]}),r&&e.jsx("div",{className:"mt-4 bg-orange-50 border-l-4 border-orange-400 p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-orange-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm text-orange-700",children:"This camp has already been completed. All fields are read-only."}),e.jsxs("p",{className:"text-sm text-orange-700 mt-1",children:["Completed by: ",a.completedBy," on"," ",new Date(a.completedAt).toLocaleDateString()]})]})]})}),I&&e.jsx("div",{className:"mt-4 bg-red-50 border-l-4 border-red-400 p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm text-red-700",children:"This camp has been cancelled. All fields are read-only."}),e.jsxs("p",{className:"text-sm text-red-700 mt-1",children:["Cancelled by: ",a.cancelledBy," on"," ",new Date(a.cancelledAt).toLocaleDateString()]})]})]})}),e.jsx(Us,{open:p,onOpenChange:F,children:e.jsxs(Be,{children:[e.jsxs(He,{children:[e.jsx(Ve,{children:"Cancel Camp"}),e.jsx(qe,{children:"Are you sure you want to cancel this camp? This action cannot be undone."})]}),e.jsxs(ze,{children:[e.jsx(Ge,{children:"No, keep camp"}),e.jsx(_e,{className:"bg-red-600 text-white hover:bg-red-700",onClick:f,children:"Yes, cancel camp"})]})]})})]})]})},Hs=()=>{const s=ae(),{currentUser:t}=te(),[l,m]=i.useState(!1),[c,y]=i.useState(""),[h,S]=i.useState(!1),[r,k]=i.useState(!1),[d,w]=i.useState(null),[O,E]=i.useState(!1),[a,v]=i.useState({campCode:"",date:"",clinicCode:"",address:"",district:"",state:"",pinCode:"",nurseName:"",mobileNo:"",teamLeader:"",dcName:"",agentName:"",roName:"",somName:"",completedBy:"",completedAt:"",status:"",unitsSold:"",revenue:"",amountPaidToFinance:"",marketingExpense:"",operationalExpense:"",transactionId:"",partnerName:"",partnerAdjustedCount:"",partnerAdjustmentAmount:"",phleboName:"",phleboMobileNo:"",reportStatus:""}),I=()=>{v({campCode:"",date:"",clinicCode:"",address:"",district:"",state:"",pinCode:"",nurseName:"",mobileNo:"",teamLeader:"",dcName:"",agentName:"",roName:"",somName:"",completedBy:"",completedAt:"",status:"",unitsSold:"",revenue:"",amountPaidToFinance:"",marketingExpense:"",operationalExpense:"",transactionId:"",partnerName:"",partnerAdjustedCount:"",partnerAdjustmentAmount:"",phleboName:"",phleboMobileNo:"",reportStatus:""}),S(!1),k(!1),w(null),E(!1),y(""),m(!1)},N=()=>{I(),s("/health-camp")},p=b=>{v(C=>({...C,campCode:b})),S(!1),k(!1),E(!1),y(""),(async()=>{m(!0);try{const C=M(R,"healthCamps"),x=await V(C);if(x.exists()){const u=Object.entries(x.val()),[A,$]=u.find(([U,D])=>{var P;return((P=D.campCode)==null?void 0:P.toUpperCase())===b.toUpperCase()})||[];$?F(A,$):o("Camp not found")}}catch(C){o("Error fetching camp data: "+C.message)}finally{m(!1)}})()},F=(b,j)=>{v(C=>({...C,campCode:j.campCode,date:"",clinicCode:"",address:"",district:"",state:"",pinCode:"",nurseName:"",mobileNo:"",tl:"",tlEmpId:"",dcName:"",dcEmpId:"",completedBy:"",completedAt:"",status:"",unitsSold:"",revenue:"",amountPaidToFinance:"",marketingExpense:"",operationalExpense:"",transactionId:"",partnerName:"",partnerAdjustedCount:"",partnerAdjustmentAmount:"",phleboName:"",phleboMobileNo:"",reportStatus:""})),w(b),S(!0),k(!!j.reportStatus),E(j.status==="completed"),v(C=>({...C,...j})),y(""),j.status!=="completed"&&y("Cannot update report status: Camp is not completed yet")},o=b=>{y(b),S(!1),E(!1)},n=b=>{const{name:j,value:C}=b.target;!r&&O&&v(x=>({...x,[j]:C}))},f=b=>{v(j=>({...j,campCode:b}))},g=async b=>{if(b.preventDefault(),!(r||!O)){m(!0);try{if(a.status!=="completed")throw new Error("Cannot update report status: Camp must be completed first");const j={reportStatus:a.reportStatus,reportStatusUpdatedBy:t.email,reportStatusUpdatedAt:new Date().toISOString()},C=M(R,`healthCamps/${d}`);await ie(C,j),alert("Report status updated successfully!"),k(!0)}catch(j){y("Failed to update report status: "+j.message)}finally{m(!1)}}};return e.jsxs("form",{onSubmit:g,className:"space-y-8",children:[c&&e.jsx(ce,{variant:"destructive",children:e.jsx(me,{children:c})}),e.jsx(Pe,{activeContext:"close",onCampCodeClick:p}),e.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Search Camp"}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Camp Code",h&&e.jsx("span",{className:`ml-2 text-xs ${r?"text-orange-600":O?"text-green-600":"text-yellow-600"}`,children:r?"✓ Report Status Already Updated":O?"✓ Camp Found (Completed)":"⚠ Camp Found (Not Completed)"})]}),e.jsx(Re,{value:a.campCode,onChange:f,onCampFound:F,onError:o,onLoading:m})]})]}),h&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Camp Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Date"}),e.jsx("input",{type:"text",value:a.date,readOnly:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 bg-gray-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Clinic Code"}),e.jsx("input",{type:"text",value:a.clinicCode,readOnly:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 bg-gray-100"})]}),e.jsxs("div",{className:"md:col-span-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Address"}),e.jsx("input",{type:"text",value:a.address,readOnly:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 bg-gray-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"District"}),e.jsx("input",{type:"text",value:a.district,readOnly:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 bg-gray-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"State"}),e.jsx("input",{type:"text",value:a.state,readOnly:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 bg-gray-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Pin Code"}),e.jsx("input",{type:"text",value:a.pinCode,readOnly:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 bg-gray-100"})]})]})]}),e.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Staff Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nurse Name"}),e.jsx("input",{type:"text",value:a.nurseName,readOnly:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 bg-gray-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Mobile Number"}),e.jsx("input",{type:"text",value:a.mobileNo,readOnly:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 bg-gray-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Team Leader"}),e.jsx("input",{type:"text",value:a.teamLeader,readOnly:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 bg-gray-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Agent"}),e.jsx("input",{type:"text",value:a.agentName,readOnly:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 bg-gray-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"DC Name"}),e.jsx("input",{type:"text",value:a.dcName,readOnly:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 bg-gray-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"SOM"}),e.jsx("input",{type:"text",value:a.somName,readOnly:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 bg-gray-100"})]})]})]}),e.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Financial Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Units Sold"}),e.jsx("input",{type:"text",value:a.unitsSold,readOnly:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 bg-gray-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Revenue"}),e.jsx("input",{type:"text",value:a.revenue,readOnly:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 bg-gray-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Transaction ID"}),e.jsx("input",{type:"text",value:a.transactionId,readOnly:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 bg-gray-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Amount Paid to Finance"}),e.jsx("input",{type:"text",value:a.amountPaidToFinance,readOnly:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 bg-gray-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Marketing Expense"}),e.jsx("input",{type:"text",value:a.marketingExpense,readOnly:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 bg-gray-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Operational Expense"}),e.jsx("input",{type:"text",value:a.operationalExpense,readOnly:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 bg-gray-100"})]})]})]}),a.partnerName&&e.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Partner Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Partner Name"}),e.jsx("input",{type:"text",value:a.partnerName,readOnly:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 bg-gray-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Partner Adjusted Count"}),e.jsx("input",{type:"text",value:a.partnerAdjustedCount,readOnly:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 bg-gray-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Partner Adjustment Amount"}),e.jsx("input",{type:"text",value:a.partnerAdjustmentAmount,readOnly:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 bg-gray-100"})]})]})]}),e.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Phlebotomist Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Phlebotomist Name"}),e.jsx("input",{type:"text",value:a.phleboName,readOnly:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 bg-gray-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Phlebotomist Mobile Number"}),e.jsx("input",{type:"text",value:a.phleboMobileNo,readOnly:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 bg-gray-100"})]})]})]}),e.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Report Status"}),e.jsx("div",{className:"grid grid-cols-1 gap-6",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),r?e.jsxs("div",{className:"mt-2",children:[e.jsx("span",{className:`px-3 py-2 rounded-md ${a.reportStatus==="sent"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:a.reportStatus==="sent"?"Sent":"Not Sent"}),e.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["Updated by: ",a.reportStatusUpdatedBy," on"," ",new Date(a.reportStatusUpdatedAt).toLocaleDateString()]})]}):e.jsxs("select",{name:"reportStatus",value:a.reportStatus,onChange:n,required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",children:[e.jsx("option",{value:"",children:"Select Status"}),e.jsx("option",{value:"sent",children:"Sent"}),e.jsx("option",{value:"not_sent",children:"Not Sent"})]})]})})]}),e.jsxs("div",{className:"bg-blue-50 p-6 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-medium text-blue-900 mb-4",children:"Financial Summary"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-blue-700",children:"Total Revenue:"}),e.jsxs("span",{className:"ml-2 font-medium",children:["₹",a.revenue]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-blue-700",children:"Total Expenses:"}),e.jsxs("span",{className:"ml-2 font-medium",children:["₹",(parseInt(a.amountPaidToFinance||0)+parseInt(a.marketingExpense||0)+parseInt(a.operationalExpense||0)).toLocaleString()]})]}),a.partnerName&&e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"text-sm text-blue-700",children:"Partner Adjustment:"}),e.jsxs("span",{className:"ml-2 font-medium",children:["₹",a.partnerAdjustmentAmount]})]})]})]}),e.jsxs("div",{className:"bg-green-50 p-6 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-medium text-green-900 mb-4",children:"Completion Details"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-green-700",children:"Completed By:"}),e.jsx("span",{className:"ml-2 font-medium",children:a.completedBy})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-green-700",children:"Completed On:"}),e.jsx("span",{className:"ml-2 font-medium",children:new Date(a.completedAt).toLocaleDateString()})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4 mt-8",children:[!r&&e.jsx("button",{type:"submit",disabled:l,className:"bg-indigo-600 text-white px-6 py-2 rounded-md text-sm font-medium hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 flex items-center disabled:opacity-50",children:l?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Updating Status..."]}):"Update Report Status"}),e.jsx("button",{type:"button",onClick:N,className:"bg-gray-200 text-gray-700 px-6 py-2 rounded-md text-sm font-medium hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:"Back to Dashboard"})]}),r&&e.jsx("div",{className:"mt-4 bg-blue-50 border-l-4 border-blue-400 p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm text-blue-700",children:"Report status has been updated and cannot be modified."}),e.jsxs("p",{className:"text-sm text-blue-700 mt-1",children:["Last updated by: ",a.reportStatusUpdatedBy," on"," ",new Date(a.reportStatusUpdatedAt).toLocaleDateString()]})]})]})})]})]})},Zs=()=>{ae();const{currentUser:s}=te(),[t,l]=i.useState("schedule"),m=[{id:"schedule",name:"Schedule Camp",component:Ds,icon:ve,description:"Plan and organize new health camps"},{id:"complete",name:"Complete Camp",component:Bs,icon:as,description:"Mark camps as completed"},{id:"close",name:"Close Camp",component:Hs,icon:ts,description:"Archive and close camps"}];return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-100 to-indigo-100",children:e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsx("header",{className:"bg-gradient-to-r from-blue-700 to-indigo-800 px-6 py-6 shadow-lg",children:e.jsxs("div",{className:"max-w-7xl mx-auto flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"p-2 bg-white/10 rounded-lg",children:e.jsx(es,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-white",children:"Health Camp Management"}),e.jsx("p",{className:"text-blue-100 text-sm mt-1",children:"Organize and manage community health initiatives"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 bg-white/10 rounded-lg px-4 py-2.5 backdrop-blur-sm",children:[e.jsx(Ce,{className:"w-5 h-5 text-white"}),e.jsx("div",{className:"flex flex-col",children:e.jsx("span",{className:"text-sm font-medium text-white",children:s==null?void 0:s.email})})]})]})}),e.jsx("main",{className:"flex-1 px-6 py-8",children:e.jsx("div",{className:"max-w-9xl mx-auto",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl overflow-hidden border border-gray-100",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 flex items-center space-x-2 text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Dashboard"}),e.jsx(ss,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-blue-600 font-medium",children:"Health Camps"})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 bg-gray-50/50 p-2 rounded-xl",children:m.map(c=>e.jsxs("button",{onClick:()=>l(c.id),disabled:!c.component,className:`
                        flex flex-col items-center gap-1.5 
                        rounded-xl py-3 px-4 
                        transition-all duration-200 ease-in-out
                        ${c.component?t===c.id?"bg-white shadow-lg ring-2 ring-blue-600/10 scale-100":"hover:bg-white/80 hover:shadow-md scale-95 hover:scale-100":"opacity-50 cursor-not-allowed bg-gray-50"}
                      `,children:[e.jsx("div",{className:`
                        p-2 rounded-lg 
                        ${c.component?t===c.id?"bg-blue-600 text-white":"bg-gray-100 text-gray-600":"bg-gray-200 text-gray-400"}
                      `,children:e.jsx(c.icon,{className:"w-5 h-5"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`
                          font-medium 
                          ${c.component?t===c.id?"text-blue-600":"text-gray-700":"text-gray-400"}
                        `,children:c.name}),e.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:c.description})]})]},c.id))}),e.jsx("div",{className:"mt-6",children:m.map(c=>e.jsx("div",{className:`
                        transform transition-all duration-300
                        ${t===c.id?"opacity-100 translate-y-0":"opacity-0 translate-y-4 hidden"}
                      `,children:e.jsx("div",{className:"bg-white rounded-xl p-6 ring-1 ring-gray-100",children:c.component?e.jsx(c.component,{}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-gray-500",children:[e.jsx("div",{className:"bg-gray-100 p-4 rounded-full mb-4",children:e.jsx(c.icon,{className:"w-8 h-8 text-gray-400"})}),e.jsxs("p",{className:"text-lg font-medium text-gray-600",children:[c.name," functionality coming soon..."]}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"This feature is currently under development"})]})})},c.id))})]})]})})})]})})};export{Zs as default};
