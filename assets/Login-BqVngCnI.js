import{r as t,u as b,b as N,j as e,L as x,M as v,d as S}from"./common-vendor-Dm1O5F_f.js";import{u as C}from"./index-D5f3LA8Q.js";import{C as E,a as A,b as I,c as L,d as D}from"./card-LNUWDAdH.js";import{I as p}from"./input-B4qfIMTe.js";import{A as k,a as T,B as P}from"./alert-HtEo9hhP.js";import"./firebase-vendor-DMyrRdrZ.js";const R=()=>{const[o,g]=t.useState(""),[i,f]=t.useState(""),[n,c]=t.useState(""),[r,d]=t.useState(!1),{login:w,currentUser:m}=C(),u=b(),h=N();t.useEffect(()=>{(()=>{localStorage.clear(),sessionStorage.clear(),document.cookie.split(";").forEach(a=>{document.cookie=a.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date(0).toUTCString()};path=/`)}),"caches"in window&&caches.keys().then(a=>{a.forEach(l=>caches.delete(l))})})()},[]),t.useEffect(()=>{(async()=>{var a,l;if(m){localStorage.setItem("lastActivity",new Date().getTime().toString());const j=((l=(a=h.state)==null?void 0:a.from)==null?void 0:l.pathname)||"/dashboard";u(j,{replace:!0})}})()},[m,u,h]);async function y(s){s.preventDefault();try{c(""),d(!0),localStorage.clear(),sessionStorage.clear(),await w(o,i),localStorage.setItem("lastActivity",new Date().getTime().toString())}catch(a){console.error("Login error:",a),c(a.code==="auth/user-not-found"||a.code==="auth/wrong-password"?"Invalid email or password":a.message)}finally{d(!1)}}return e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-gradient-to-br from-indigo-100 via-white to-purple-100",children:e.jsx("div",{className:"w-full max-w-xl px-4",children:e.jsxs(E,{className:"w-full border-none shadow-2xl rounded-xl bg-white/90 backdrop-blur-lg",children:[e.jsxs(A,{className:"space-y-6 text-center",children:[e.jsx("div",{className:"mx-auto bg-indigo-600 w-16 h-16 rounded-full flex items-center justify-center shadow-md",children:e.jsx(x,{className:"text-white w-8 h-8"})}),e.jsxs("div",{children:[e.jsx(I,{className:"text-3xl font-bold text-gray-900",children:"Health Camp Portal"}),e.jsx(L,{className:"text-gray-600 mt-2",children:"Sign in to access your account"})]})]}),e.jsxs(D,{className:"space-y-6",children:[n&&e.jsx(k,{variant:"destructive",className:"mb-6",children:e.jsx(T,{children:n})}),e.jsxs("form",{onSubmit:y,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"email-address",className:"text-sm font-medium text-gray-700",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(v,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx(p,{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,value:o,onChange:s=>g(s.target.value),className:"pl-10 py-2 text-base",placeholder:"Enter your email address",disabled:r})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"password",className:"text-sm font-medium text-gray-700",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(x,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx(p,{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:i,onChange:s=>f(s.target.value),className:"pl-10 py-2 text-base",placeholder:"Enter your password",disabled:r})]})]}),e.jsx(P,{type:"submit",disabled:r,className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white text-base py-3",children:r?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsx(S,{className:"animate-spin mr-2 h-5 w-5"}),"Signing In..."]}):"Sign In"})]})]})]})})})};export{R as default};
